<!DOCTYPE html>
<html>
<head>
	<title>Welcome</title>
	<!-- Compiled and minified CSS -->
  	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css">
  	<!-- jQuery -->
  	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0-beta1/jquery.min.js"></script>
  	<!-- Compiled and minified JavaScript -->
  	<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js"></script>
</head>
<body>

<div class='container'>

<div class='row'>
	<div class='col s12 center-align'>
		<h1>Home Page</h1>
	</div>
</div>

<div class="row">
	<form class="col s12">
		<div class="row">
			<div class="input-field col s12">
				<input id="usernameInput" type="text" class="validate">
				<label for="usernameInput">Username</label>
			</div>
		</div>
		<div class="row">
			<div class="input-field col s12">
				<input id="passwordInput" type="password" class="validate">
				<label for="password">Password</label>
			</div>
		</div>
		<a class="waves-effect waves-light btn" id='button'>Submit</a>
		<a class="waves-effect waves-light btn" href="/teacher">Teacher</a>
	</form>
</div>

</div>

<script type="text/javascript">
	$(document).ready(function() {
   		$('select').material_select();

   		$('#button').click(function(){
	   		var info = {
	   			username: $('#usernameInput').val(),
	   			password: $('#passwordInput').val()
	   		}
   			var originURL = document.location.origin;
   			$.post(originURL + '/auth', info).done(function(data){
		    	console.log(info);
				console.log(data);

				// window.localStorage.setItem('token', data.token);
				sessionStorage.setItem('token', data.token);

				var token = window.localStorage.getItem('token');
				window.location.href = originURL + '/teacher?token=' + data.token;



				// $.ajax({
				// 	url: originURL + '/teacher', 
				// 	method: 'GET', 
				// 	headers: {
				// 		"x-access-token": data.token
				// 	}
				// }).done(function(dat){
				// 	console.log(dat)
				// });
			});
   		});

  	});
</script>

</body>
</html>